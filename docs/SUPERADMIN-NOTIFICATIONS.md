# Настройка уведомлений для суперадминистраторов

## Описание

Система автоматически отправляет email уведомления суперадминистраторам при регистрации новых клубов через страницу `/register/`.

## Компоненты

### 1. Интерфейс настроек (Frontend)
- **Файл**: `src/pages/admin/Settings.tsx`
- **Доступ**: Только для суперадминистраторов
- **Функционал**:
  - Добавление email адресов для уведомлений
  - Удаление email адресов
  - Валидация формата email
  - Проверка на дубликаты

### 2. Firebase Functions
- **Файл**: `functions/src/index.ts`
- **Функция**: `sendSuperAdminNotification()`
- **Вызывается при**:
  - Создании нового администратора клуба
  - Регистрации через `/register/`
  - API вызове создания клуба

### 3. Email шаблон
Уведомление содержит:
- Информацию о новом клубе (название, тип, адрес, телефон)
- Данные администратора (имя, email)
- Дату и время регистрации
- Статистику системы

## Настройка

### Добавление первого email суперадминистратора

```bash
# Добавить email через скрипт
node scripts/add-superadmin-email.js your-email@example.com
```

### Управление через интерфейс

1. Войдите как суперадминистратор
2. Перейдите в раздел "Системные настройки" (/admin/settings)
3. В блоке "Email уведомления для суперадминистраторов":
   - Введите email и нажмите "Добавить"
   - Для удаления нажмите иконку корзины рядом с email

## Структура данных в Firestore

```
settings/notifications
{
  superAdminEmails: string[],
  updatedAt: timestamp
}
```

## Тестирование

1. Добавьте тестовый email в настройки
2. Зарегистрируйте новый клуб через `/register/`
3. Проверьте получение email уведомления

## Примечания

- Email отправляются асинхронно и не блокируют процесс регистрации
- Если список email пуст, уведомления не отправляются
- Ошибки отправки логируются в консоль Firebase Functions
- Каждый суперадминистратор получает отдельное письмо