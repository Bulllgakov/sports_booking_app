import{s as xe,f as N,d as B,a as Qe,b as Ve,i as Ge,j as e,c as Ue,l as me,e as _e,g as Je,h as Ke,k as Xe,n as fe,m as be}from"./index-B7GKx4nt.js";import{r as h}from"./vendor-CVBzEvQT.js";import{N as F,P as c,O as W,a4 as R,a3 as ve,Q as Z,a1 as Ze}from"./firebase-DTN2oheZ.js";function it({isOpen:O,onClose:ee,court:r,venue:x}){const[q,Y]=h.useState("datetime"),[u,je]=h.useState(xe()),[j,Q]=h.useState(""),[b,pe]=h.useState(60),[te,ke]=h.useState("private"),[V,ae]=h.useState([]),[se,z]=h.useState(!1),[I,we]=h.useState(""),[$,Ne]=h.useState(""),[G,Se]=h.useState(""),[ie,Te]=h.useState(""),[re,De]=h.useState(""),[ne,Me]=h.useState(""),[J,oe]=h.useState(null),[a,Ce]=h.useState(window.innerWidth<=768);h.useEffect(()=>{const i=()=>{Ce(window.innerWidth<=768)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),h.useEffect(()=>{if(O){console.log("Modal opened, venue:",x,"bookingDurations:",x.bookingDurations);const i=x.bookingDurations||{60:!0,90:!0,120:!0},s=[60,90,120].filter(m=>i[m]!==!1);console.log("Available durations:",s),s.length>0&&!s.includes(b)&&pe(s[0]),Y("datetime"),Q(""),ae([]),r&&x&&P()}else J&&(J(),oe(null))},[O]),h.useEffect(()=>{if(q==="datetime"&&u&&r&&x){P();const i=new Date(u);i.setHours(0,0,0,0);const s=new Date(u);s.setHours(23,59,59,999);const m=N(u,"yyyy-MM-dd"),o=F(W(B,"bookings"),c("courtId","==",r.id),c("date","==",m),c("status","in",["confirmed","pending"])),t=F(W(B,"bookings"),c("courtId","==",r.id),c("date",">=",R.fromDate(i)),c("date","<=",R.fromDate(s)),c("status","in",["confirmed","pending"])),l=ve(o,p=>{console.log("Real-time update: bookings changed (string date)",p.docs.length,"bookings"),p.docs.forEach(y=>{console.log("Booking:",y.id,y.data())}),P()}),d=ve(t,p=>{console.log("Real-time update: bookings changed (timestamp date)",p.docs.length,"bookings"),p.docs.forEach(y=>{console.log("Booking:",y.id,y.data())}),P()}),v=()=>{l(),d()};oe(()=>v)}return()=>{J&&(J(),oe(null))}},[q,u,b,r.id,x.id]);const P=async(i,s)=>{var t;const m=i||b,o=s||u;console.log("Loading time slots for:",{date:o,courtId:r.id,courtName:r.name,venue:x.name,duration:m,workingHours:x.workingHours}),z(!0);try{const l=new Date(o);l.setHours(0,0,0,0);const d=new Date(o);d.setHours(23,59,59,999);const v=N(o,"yyyy-MM-dd");let p=F(W(B,"bookings"),c("courtId","==",r.id),c("date","==",v),c("status","in",["confirmed","pending"])),y=await Z(p);y.empty&&(p=F(W(B,"bookings"),c("courtId","==",r.id),c("date",">=",R.fromDate(l)),c("date","<=",R.fromDate(d)),c("status","in",["confirmed","pending"])),y=await Z(p));const S=y.docs.map(n=>{const g=n.data();let M=g.duration||60;return console.log("Processing booking:",n.id,{duration:g.duration,amount:g.amount,price:g.price,startTime:g.startTime,endTime:g.endTime}),{time:g.time||g.startTime,startTime:g.startTime||g.time,endTime:g.endTime,duration:M}});console.log("Found bookings:",S.length,S);const T=o.getDay(),k=T===0||T===6,H=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][T];console.log("Day of week:",T,"Day name:",H,"Is weekend:",k,"Working hours:",x.workingHours);const A=[];let D="07:00",E="23:00";if((t=x.workingHours)!=null&&t[H]){const n=x.workingHours[H];if(console.log("Found day-specific hours:",H,n),typeof n=="object"&&n.open&&n.close)D=n.open,E=n.close;else if(typeof n=="string"&&n.includes("-")){const[g,M]=n.split("-").map(U=>U.trim());g&&M&&(D=g,E=M)}}else if(x.workingHours){const n=x.workingHours[k?"weekend":"weekday"];if(console.log("Using weekday/weekend format:",k?"weekend":"weekday",n),typeof n=="string"&&n.includes("-")){const[g,M]=n.split("-").map(U=>U.trim());g&&M&&(D=g,E=M)}else typeof n=="object"&&n.open&&n.close&&(D=n.open,E=n.close)}else console.log("No working hours found, using defaults");console.log("Working hours parsed:",{openTime:D,closeTime:E});const[ze,$e]=D.split(":").map(Number),[Ae,Le]=E.split(":").map(Number),ge=new Date,Fe=N(o,"yyyy-MM-dd")===N(ge,"yyyy-MM-dd");let w=ze*60+$e;const ue=Ae*60+Le,le=x.bookingSlotInterval||30;for(le===60&&w%60!==0&&(w=Math.ceil(w/60)*60);w<ue;){const n=Math.floor(w/60),g=w%60,M=`${n.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`,U=Qe(Ve(new Date(o),n),g);if(Fe&&Ge(U,ge)){w+=le;continue}if(w+m>ue)break;let ye=!0;for(const C of S){const L=C.startTime.split(":");if(L.length!==2)continue;const _=parseInt(L[0]),ce=parseInt(L[1]),X=_*60+ce,qe=X+C.duration,Ye=w+m;if(w<qe&&Ye>X){ye=!1;break}}const de=o.getDay(),he=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][de];let K=0;if(r.pricing&&r.pricing[he]){const C=r.pricing[he];if(K=C.basePrice,C.intervals&&C.intervals.length>0){const L=n;for(const _ of C.intervals){const[ce]=_.from.split(":").map(Number),[X]=_.to.split(":").map(Number);if(L>=ce&&L<X){K=_.price;break}}}}else{const C=de===0||de===6;K=r.pricePerHour||(C?r.priceWeekend:r.priceWeekday)||0}const Oe=Math.round(K*m/60);A.push({time:M,available:ye,price:Oe}),w+=le}ae(A),console.log("Loaded time slots:",A.length,A)}catch(l){console.error("Error loading time slots:",l),ae([])}finally{z(!1)}},Ie=i=>{je(i),Q(""),P(b,i)},He=async i=>{z(!0);try{const s=new Date(u);s.setHours(0,0,0,0);const m=new Date(u);m.setHours(23,59,59,999);const o=N(u,"yyyy-MM-dd");let t=F(W(B,"bookings"),c("courtId","==",r.id),c("date","==",o),c("status","in",["confirmed","pending"])),l=await Z(t);l.empty&&(t=F(W(B,"bookings"),c("courtId","==",r.id),c("date",">=",R.fromDate(s)),c("date","<=",R.fromDate(m)),c("status","in",["confirmed","pending"])),l=await Z(t));const d=l.docs.map(k=>{const f=k.data();let H=f.duration||60;return console.log("Processing booking:",k.id,{duration:f.duration,amount:f.amount,price:f.price,startTime:f.startTime,endTime:f.endTime}),{time:f.time||f.startTime,startTime:f.startTime||f.time,endTime:f.endTime,duration:H}}),[v,p]=i.split(":").map(Number),y=v*60+p,S=y+b;let T=!0;for(const k of d){const f=k.startTime.split(":");if(f.length!==2)continue;const H=parseInt(f[0]),A=parseInt(f[1]),D=H*60+A,E=D+k.duration;if(y<E&&S>D){T=!1;break}}if(!T){alert("К сожалению, это время было только что забронировано. Пожалуйста, выберите другое время."),await P();return}Q(i),Y("gameType")}catch(s){console.error("Error checking availability:",s),alert("Ошибка проверки доступности. Попробуйте еще раз.")}finally{z(!1)}},Ee=i=>{ke(i)},Pe=async()=>{if(!I||!$||!G||!ie||!re||!ne){alert("Пожалуйста, заполните все поля");return}if(!_e(I)){alert("Имя должно быть от 2 до 100 символов");return}if(!Je($)){alert("Некорректный номер телефона");return}if(!Ke(G)){alert("Некорректный email");return}if(!Xe(u)){alert("Нельзя забронировать на прошедшую дату");return}z(!0);try{const[i,s]=j.split(":").map(Number),m=new Date(u);m.setHours(i,s,0,0);const o=new Date(m.getTime()+b*60*1e3),t=V.find(v=>v.time===j),l={courtId:r.id,courtName:r.name,venueId:x.id,venueName:x.name,date:N(u,"yyyy-MM-dd"),time:j,startTime:j,endTime:`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`,duration:b,gameType:te,customerName:be(I),customerPhone:fe($),customerEmail:G.toLowerCase().trim(),clientName:be(I),clientPhone:fe($),price:t?t.price:0,amount:t?t.price:0,status:"confirmed",paymentStatus:"online_payment",paymentMethod:"online",paymentHistory:[{timestamp:R.now(),action:"created",userId:"web-client",userName:I}],createdBy:{userId:"web-client",userName:I,userRole:"client"},createdAt:new Date,source:"web"},d=await Ze(W(B,"bookings"),l);alert(`Бронирование успешно оплачено и создано! ID: ${d.id}`),ee()}catch(i){console.error("Error creating booking:",i),alert("Ошибка при создании бронирования")}finally{z(!1)}};if(!O)return null;const Be=()=>{var o;const i=[],s=["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],m=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"];for(let t=0;t<14;t++)i.push(Ue(xe(),t));return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h3",style:{marginBottom:"var(--spacing-lg)"},children:"Выберите дату и время"}),e.jsxs("div",{style:{display:a?"block":"grid",gridTemplateColumns:a?"1fr":"300px 1fr",gap:"var(--spacing-xl)"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"var(--spacing-xl)"},children:[e.jsx("h4",{className:"body-bold",style:{marginBottom:"var(--spacing-md)"},children:"Дата бронирования"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"var(--spacing-xs)"},children:i.map((t,l)=>{const d=N(t,"yyyy-MM-dd")===N(u,"yyyy-MM-dd"),v=l===0,p=m[t.getDay()],y=l===0||t.getDate()===1;return e.jsxs("div",{style:{textAlign:"center"},children:[y&&e.jsx("div",{className:"caption",style:{marginBottom:"var(--spacing-xs)",color:"var(--gray)",height:"16px",fontSize:"11px"},children:s[t.getMonth()]}),!y&&e.jsx("div",{style:{height:"16px",marginBottom:"var(--spacing-xs)"}}),e.jsxs("button",{onClick:()=>Ie(t),style:{width:"100%",aspectRatio:"1",padding:"4px",border:`2px solid ${d||v?"var(--primary)":"var(--extra-light-gray)"}`,borderRadius:"var(--radius-sm)",background:d?"var(--primary)":"var(--white)",color:d?"white":"var(--dark)",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:[e.jsx("div",{className:"caption",style:{fontWeight:600,color:d?"white":"var(--gray)"},children:p}),e.jsx("div",{className:"body-bold",style:{fontSize:"16px",color:d?"white":"var(--dark)"},children:t.getDate()})]})]},t.toISOString())})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"body-bold",style:{marginBottom:"var(--spacing-md)"},children:"Длительность игры"}),e.jsx("div",{style:{display:"flex",gap:"var(--spacing-sm)"},children:[60,90,120].map(t=>{if(!((x.bookingDurations||{60:!0,90:!0,120:!0})[t]!==!1))return null;const v=u.getDay(),y=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][v];let S=0;if(r.pricing&&r.pricing[y])S=r.pricing[y].basePrice;else{const k=v===0||v===6;S=r.pricePerHour||(k?r.priceWeekend:r.priceWeekday)||0}const T=Math.round(S*t/60);return e.jsxs("button",{onClick:()=>{t!==b&&(pe(t),Q(""),P(t))},style:{flex:1,padding:a?"var(--spacing-sm) var(--spacing-xs)":"var(--spacing-md)",border:`2px solid ${b===t?"var(--primary)":"var(--extra-light-gray)"}`,borderRadius:"var(--radius-md)",background:b===t?"var(--primary)":"var(--white)",color:b===t?"white":"var(--dark)",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[e.jsx("span",{className:"body-bold",style:{fontSize:a?"14px":"16px"},children:t===60?"1 час":t===90?"1.5 часа":"2 часа"}),e.jsxs("span",{className:"caption",style:{color:b===t?"white":"var(--primary)",fontWeight:600},children:[T,"₽"]})]},t)})})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"body-bold",style:{marginBottom:"var(--spacing-md)"},children:["Свободное время на ",N(u,"d MMMM",{locale:me})]}),se?e.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-3xl)"},children:e.jsx("div",{className:"spinner"})}):V.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:a?"repeat(3, 1fr)":"repeat(4, 1fr)",gap:"var(--spacing-sm)",maxHeight:a?"400px":"500px",overflowY:"auto",paddingRight:"var(--spacing-sm)",marginBottom:"var(--spacing-md)"},children:V.map(t=>{const l=j===t.time;return e.jsxs("button",{onClick:()=>t.available&&Q(t.time),disabled:!t.available,style:{padding:"var(--spacing-md) var(--spacing-xs)",border:`2px solid ${t.available?l?"var(--primary)":"var(--light-gray)":"var(--extra-light-gray)"}`,borderRadius:"var(--radius-sm)",background:t.available?l?"var(--primary)":"var(--white)":"var(--extra-light-gray)",color:t.available?l?"white":"var(--dark)":"var(--gray)",cursor:t.available?"pointer":"not-allowed",transition:"all 0.2s",opacity:t.available?1:.5,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",minHeight:"65px",justifyContent:"center"},children:[e.jsxs("span",{className:"body-bold",style:{fontSize:"14px"},children:[t.time,"-",(()=>{const[d,v]=t.time.split(":").map(Number),p=new Date;return p.setHours(d,v,0,0),p.setTime(p.getTime()+b*60*1e3),`${p.getHours().toString().padStart(2,"0")}:${p.getMinutes().toString().padStart(2,"0")}`})()]}),t.available?l&&e.jsx("span",{className:"caption",style:{color:"white",fontWeight:600},children:"Выбрано"}):e.jsx("span",{className:"caption",children:"Занято"})]},t.time)})}),e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-lg)",flexWrap:"wrap",marginTop:"var(--spacing-md)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-xs)"},children:[e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"var(--white)",border:"2px solid var(--light-gray)",borderRadius:"4px"}}),e.jsx("span",{className:"caption",children:"Свободно"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-xs)"},children:[e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"var(--extra-light-gray)",borderRadius:"4px"}}),e.jsx("span",{className:"caption",children:"Занято"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-xs)"},children:[e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"var(--primary)",borderRadius:"4px"}}),e.jsx("span",{className:"caption",children:"Выбрано"})]})]})]}):e.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-xl)",color:"var(--gray)"},children:e.jsx("p",{className:"body",children:"Нет доступных слотов на выбранную дату"})})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:a?"fixed":"static",bottom:a?"0":"auto",left:a?"0":"auto",right:a?"0":"auto",padding:a?"var(--spacing-lg)":"0",marginTop:a?"var(--spacing-xl)":"var(--spacing-lg)",background:a?"var(--white)":"transparent",borderTop:a?"1px solid var(--extra-light-gray)":"none",zIndex:10},children:[e.jsx("div",{style:{flex:1},children:j&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"caption",style:{color:"var(--gray)",marginBottom:"4px"},children:[N(u,"d MMMM",{locale:me}),", ",j,"-",(()=>{const[t,l]=j.split(":").map(Number),d=new Date;return d.setHours(t,l,0,0),d.setTime(d.getTime()+b*60*1e3),`${d.getHours().toString().padStart(2,"0")}:${d.getMinutes().toString().padStart(2,"0")}`})()]}),e.jsxs("div",{className:"h3",style:{color:"var(--primary)"},children:[((o=V.find(t=>t.time===j))==null?void 0:o.price)||0," ₽"]})]})}),e.jsx("button",{className:"flutter-button",onClick:()=>He(j),disabled:!u||!j,style:{width:a?"50%":"auto",minWidth:"200px"},children:"Продолжить"})]})]})},We=()=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h3",style:{marginBottom:"var(--spacing-lg)"},children:"Выберите тип игры"}),e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-md)"},children:[e.jsxs("button",{onClick:()=>Ee("private"),style:{padding:"var(--spacing-lg)",border:`2px solid ${te==="private"?"var(--primary)":"var(--extra-light-gray)"}`,borderRadius:"var(--radius-md)",background:te==="private"?"var(--primary-light)":"var(--white)",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},children:[e.jsx("div",{className:"body-bold",children:"Приватная игра"}),e.jsx("div",{className:"caption",style:{color:"var(--gray)"},children:"Для вас и ваших друзей"})]}),e.jsxs("button",{style:{padding:"var(--spacing-lg)",border:"2px solid var(--extra-light-gray)",borderRadius:"var(--radius-md)",background:"var(--extra-light-gray)",cursor:"not-allowed",transition:"all 0.2s",textAlign:"left",opacity:.6},disabled:!0,children:[e.jsx("div",{className:"body-bold",style:{color:"var(--gray)"},children:"Открытая игра"}),e.jsx("div",{className:"caption",style:{color:"var(--gray)"},children:"Присоединиться к игре (доступно в приложении)"})]})]}),e.jsxs("div",{style:{marginTop:"var(--spacing-xl)",display:"flex",justifyContent:"space-between",gap:"var(--spacing-md)",position:a?"fixed":"static",bottom:a?"0":"auto",left:a?"0":"auto",right:a?"0":"auto",padding:a?"var(--spacing-lg)":"0",background:a?"var(--white)":"transparent",borderTop:a?"1px solid var(--extra-light-gray)":"none",zIndex:10},children:[e.jsx("button",{className:"flutter-button-outlined",onClick:()=>Y("datetime"),style:{flex:1,background:"var(--white)",color:"var(--primary)",border:"2px solid var(--primary)"},children:"Назад"}),e.jsx("button",{className:"flutter-button",onClick:()=>Y("payment"),style:{flex:1},children:"Далее"})]})]}),Re=()=>{const i=(()=>{const s=V.find(m=>m.time===j);return(s==null?void 0:s.price)||0})();return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h3",style:{marginBottom:"var(--spacing-lg)"},children:"Оплата бронирования"}),e.jsx("div",{className:"info-section",style:{marginBottom:"var(--spacing-lg)"},children:e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-sm)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{className:"body",children:"Корт:"}),e.jsx("span",{className:"body-bold",children:r.name})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{className:"body",children:"Дата:"}),e.jsx("span",{className:"body-bold",children:N(u,"d MMMM yyyy",{locale:me})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{className:"body",children:"Время:"}),e.jsxs("span",{className:"body-bold",children:[j," - ",(()=>{const[s,m]=j.split(":").map(Number),o=new Date;return o.setHours(s,m,0,0),o.setTime(o.getTime()+b*60*1e3),`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`})()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{className:"body",children:"Тип игры:"}),e.jsx("span",{className:"body-bold",children:"Приватная"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"var(--spacing-sm)",borderTop:"1px solid var(--extra-light-gray)"},children:[e.jsx("span",{className:"body-bold",children:"Итого:"}),e.jsxs("span",{className:"h3",style:{color:"var(--primary)"},children:[i,"₽"]})]})]})}),e.jsxs("div",{style:{marginBottom:"var(--spacing-lg)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Имя"}),e.jsx("input",{type:"text",className:"form-input",value:I,onChange:s=>we(s.target.value),placeholder:"Иван Иванов",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Телефон"}),e.jsx("input",{type:"tel",className:"form-input",value:$,onChange:s=>Ne(s.target.value),placeholder:"+7 (900) 123-45-67",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-input",value:G,onChange:s=>Se(s.target.value),placeholder:"email@example.com",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Номер карты"}),e.jsx("input",{type:"text",className:"form-input",value:ie,onChange:s=>Te(s.target.value),placeholder:"1234 5678 9012 3456",maxLength:19,required:!0})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--spacing-md)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Срок действия"}),e.jsx("input",{type:"text",className:"form-input",value:re,onChange:s=>De(s.target.value),placeholder:"MM/YY",maxLength:5,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"CVC"}),e.jsx("input",{type:"text",className:"form-input",value:ne,onChange:s=>Me(s.target.value),placeholder:"123",maxLength:3,required:!0})]})]})]}),e.jsxs("div",{style:{marginTop:"var(--spacing-xl)",display:"flex",justifyContent:"space-between",gap:"var(--spacing-md)",position:a?"fixed":"static",bottom:a?"0":"auto",left:a?"0":"auto",right:a?"0":"auto",padding:a?"var(--spacing-lg)":"0",background:a?"var(--white)":"transparent",borderTop:a?"1px solid var(--extra-light-gray)":"none",zIndex:10},children:[e.jsx("button",{className:"flutter-button-outlined",onClick:()=>Y("gameType"),style:{flex:1,background:"var(--white)",color:"var(--primary)",border:"2px solid var(--primary)"},children:"Назад"}),e.jsx("button",{className:"flutter-button",onClick:Pe,disabled:se||!I||!$||!G||!ie||!re||!ne,style:{flex:1},children:se?e.jsx("div",{className:"spinner"}):`Оплатить ${i}₽`})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop",onClick:ee,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,display:O?"block":"none",animation:"fadeIn 0.2s ease"}}),e.jsxs("div",{className:"modal-content",style:{position:"fixed",top:a?"0":"50%",left:a?"0":"50%",transform:a?"none":"translate(-50%, -50%)",background:"var(--white)",borderRadius:a?"0":"var(--radius-xl)",padding:a?"var(--spacing-lg)":"var(--spacing-2xl)",maxWidth:a?"100%":"1000px",width:a?"100%":"90%",height:a?"100vh":"auto",maxHeight:a?"100vh":"85vh",overflowY:"auto",zIndex:1001,display:O?"block":"none",boxShadow:a?"none":"var(--shadow-xl)",animation:a?"slideUp 0.3s ease":"slideIn 0.3s ease"},children:[e.jsx("button",{onClick:ee,style:{position:"absolute",top:"var(--spacing-md)",right:"var(--spacing-md)",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--gray)"},children:"×"}),q==="datetime"&&Be(),q==="gameType"&&We(),q==="payment"&&Re()]}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translate(-50%, -45%);
          }
          to { 
            opacity: 1;
            transform: translate(-50%, -50%);
          }
        }
        
        @keyframes slideUp {
          from { 
            opacity: 0;
            transform: translateY(100%);
          }
          to { 
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .spinner {
          width: 40px;
          height: 40px;
          border: 3px solid var(--extra-light-gray);
          border-top-color: var(--primary);
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto;
        }
        
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
          .modal-content {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            transform: none !important;
            width: 100% !important;
            height: 100vh !important;
            max-width: 100% !important;
            max-height: 100vh !important;
            border-radius: 0 !important;
            padding: var(--spacing-lg) !important;
          }
        }
      `})]})}export{it as default};
