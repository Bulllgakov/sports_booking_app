import{s as ye,f as j,d as F,a as Ae,b as Fe,i as Le,j as e,c as Oe,l as oe,e as qe,g as Ue,h as Ge,k as Qe,n as ue,m as he}from"./index-CzX_wZT1.js";import{r as k}from"./vendor-C_tjuDKg.js";import{q as L,w as c,c as O,T as W,o as xe,g as ee}from"./firebase-DA4P4dhI.js";function Ke({isOpen:q,onClose:le,court:i,venue:u}){const[U,G]=k.useState("datetime"),[y,fe]=k.useState(ye()),[b,Q]=k.useState(""),[x,de]=k.useState(60),[J,be]=k.useState("private"),[V,te]=k.useState([]),[ae,R]=k.useState(!1),[N,ve]=k.useState(""),[E,ke]=k.useState(""),[z,je]=k.useState(""),[K,se]=k.useState(null),[a,we]=k.useState(window.innerWidth<=768);k.useEffect(()=>{const r=()=>{we(window.innerWidth<=768)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),k.useEffect(()=>{if(q){console.log("Modal opened, venue:",u,"bookingDurations:",u.bookingDurations);const r=u.bookingDurations||{60:!0,90:!0,120:!0},s=[60,90,120].filter(p=>r[p]!==!1);console.log("Available durations:",s),s.length>0&&!s.includes(x)&&de(s[0]),G("datetime"),Q(""),te([]),i&&u&&B()}else K&&(K(),se(null))},[q]),k.useEffect(()=>{if(U==="datetime"&&y&&i&&u){B();const r=new Date(y);r.setHours(0,0,0,0);const s=new Date(y);s.setHours(23,59,59,999);const p=j(y,"yyyy-MM-dd"),o=L(O(F,"bookings"),c("courtId","==",i.id),c("date","==",p),c("status","in",["confirmed","pending"])),t=L(O(F,"bookings"),c("courtId","==",i.id),c("date",">=",W.fromDate(r)),c("date","<=",W.fromDate(s)),c("status","in",["confirmed","pending"])),l=xe(o,m=>{console.log("Real-time update: bookings changed (string date)",m.docs.length,"bookings"),m.docs.forEach(h=>{console.log("Booking:",h.id,h.data())}),B()}),d=xe(t,m=>{console.log("Real-time update: bookings changed (timestamp date)",m.docs.length,"bookings"),m.docs.forEach(h=>{console.log("Booking:",h.id,h.data())}),B()}),v=()=>{l(),d()};se(()=>v)}return()=>{K&&(K(),se(null))}},[U,y,x,i.id,u.id]);const B=async(r,s)=>{var t;const p=r||x,o=s||y;console.log("Loading time slots for:",{date:o,courtId:i.id,courtName:i.name,venue:u.name,duration:p,workingHours:u.workingHours}),R(!0);try{const l=new Date(o);l.setHours(0,0,0,0);const d=new Date(o);d.setHours(23,59,59,999);const v=j(o,"yyyy-MM-dd");let m=L(O(F,"bookings"),c("courtId","==",i.id),c("date","==",v),c("status","in",["confirmed","pending"])),h=await ee(m);h.empty&&(m=L(O(F,"bookings"),c("courtId","==",i.id),c("date",">=",W.fromDate(l)),c("date","<=",W.fromDate(d)),c("status","in",["confirmed","pending"])),h=await ee(m));const T=h.docs.map(n=>{const g=n.data();let I=g.duration||60;return console.log("Processing booking:",n.id,{duration:g.duration,amount:g.amount,price:g.price,startTime:g.startTime,endTime:g.endTime}),{time:g.time||g.startTime,startTime:g.startTime||g.time,endTime:g.endTime,duration:I}});console.log("Found bookings:",T.length,T);const D=o.getDay(),w=D===0||D===6,C=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][D];console.log("Day of week:",D,"Day name:",C,"Is weekend:",w,"Working hours:",u.workingHours);const $=[];let M="07:00",P="23:00";if((t=u.workingHours)!=null&&t[C]){const n=u.workingHours[C];if(console.log("Found day-specific hours:",C,n),typeof n=="object"&&n.open&&n.close)M=n.open,P=n.close;else if(typeof n=="string"&&n.includes("-")){const[g,I]=n.split("-").map(Y=>Y.trim());g&&I&&(M=g,P=I)}}else if(u.workingHours){const n=u.workingHours[w?"weekend":"weekday"];if(console.log("Using weekday/weekend format:",w?"weekend":"weekday",n),typeof n=="string"&&n.includes("-")){const[g,I]=n.split("-").map(Y=>Y.trim());g&&I&&(M=g,P=I)}else typeof n=="object"&&n.open&&n.close&&(M=n.open,P=n.close)}else console.log("No working hours found, using defaults");console.log("Working hours parsed:",{openTime:M,closeTime:P});const[Ce,Pe]=M.split(":").map(Number),[Ee,Be]=P.split(":").map(Number),ce=new Date,We=j(o,"yyyy-MM-dd")===j(ce,"yyyy-MM-dd");let S=Ce*60+Pe;const pe=Ee*60+Be,ie=u.bookingSlotInterval||30;for(ie===60&&S%60!==0&&(S=Math.ceil(S/60)*60);S<pe;){const n=Math.floor(S/60),g=S%60,I=`${n.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`,Y=Ae(Fe(new Date(o),n),g);if(We&&Le(Y,ce)){S+=ie;continue}if(S+p>pe)break;let me=!0;for(const H of T){const A=H.startTime.split(":");if(A.length!==2)continue;const _=parseInt(A[0]),ne=parseInt(A[1]),Z=_*60+ne,ze=Z+H.duration,$e=S+p;if(S<ze&&$e>Z){me=!1;break}}const re=o.getDay(),ge=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][re];let X=0;if(i.pricing&&i.pricing[ge]){const H=i.pricing[ge];if(X=H.basePrice,H.intervals&&H.intervals.length>0){const A=n;for(const _ of H.intervals){const[ne]=_.from.split(":").map(Number),[Z]=_.to.split(":").map(Number);if(A>=ne&&A<Z){X=_.price;break}}}}else{const H=re===0||re===6;X=i.pricePerHour||(H?i.priceWeekend:i.priceWeekday)||0}const Re=Math.round(X*p/60);$.push({time:I,available:me,price:Re}),S+=ie}te($),console.log("Loaded time slots:",$.length,$)}catch(l){console.error("Error loading time slots:",l),te([])}finally{R(!1)}},Se=r=>{fe(r),Q(""),B(x,r)},Ne=async r=>{R(!0);try{const s=new Date(y);s.setHours(0,0,0,0);const p=new Date(y);p.setHours(23,59,59,999);const o=j(y,"yyyy-MM-dd");let t=L(O(F,"bookings"),c("courtId","==",i.id),c("date","==",o),c("status","in",["confirmed","pending"])),l=await ee(t);l.empty&&(t=L(O(F,"bookings"),c("courtId","==",i.id),c("date",">=",W.fromDate(s)),c("date","<=",W.fromDate(p)),c("status","in",["confirmed","pending"])),l=await ee(t));const d=l.docs.map(w=>{const f=w.data();let C=f.duration||60;return console.log("Processing booking:",w.id,{duration:f.duration,amount:f.amount,price:f.price,startTime:f.startTime,endTime:f.endTime}),{time:f.time||f.startTime,startTime:f.startTime||f.time,endTime:f.endTime,duration:C}}),[v,m]=r.split(":").map(Number),h=v*60+m,T=h+x;let D=!0;for(const w of d){const f=w.startTime.split(":");if(f.length!==2)continue;const C=parseInt(f[0]),$=parseInt(f[1]),M=C*60+$,P=M+w.duration;if(h<P&&T>M){D=!1;break}}if(!D){alert("К сожалению, это время было только что забронировано. Пожалуйста, выберите другое время."),await B();return}Q(r),G("gameType")}catch(s){console.error("Error checking availability:",s),alert("Ошибка проверки доступности. Попробуйте еще раз.")}finally{R(!1)}},Te=r=>{be(r)},De=async()=>{if(!N||!E||!z){alert("Пожалуйста, заполните все поля");return}if(!qe(N)){alert("Имя должно быть от 2 до 100 символов");return}if(!Ue(E)){alert("Некорректный номер телефона");return}if(!Ge(z)){alert("Некорректный email");return}if(!Qe(y)){alert("Нельзя забронировать на прошедшую дату");return}R(!0);try{const[r,s]=b.split(":").map(Number),p=new Date(y);p.setHours(r,s,0,0);const o=new Date(p.getTime()+x*60*1e3),t=V.find(v=>v.time===b),l={courtId:i.id,courtName:i.name,venueId:u.id,venueName:u.name,date:j(y,"yyyy-MM-dd"),time:b,startTime:b,endTime:`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`,duration:x,gameType:J,customerName:he(N),customerPhone:ue(E),customerEmail:z.toLowerCase().trim(),clientName:he(N),clientPhone:ue(E),price:t?t.price:0,amount:t?t.price:0,status:"confirmed",paymentStatus:"online_payment",paymentMethod:"online",paymentHistory:[{timestamp:W.now(),action:"created",userId:"web-client",userName:N}],createdBy:{userId:"web-client",userName:N,userRole:"client"},createdAt:new Date,source:"web"},d=new URLSearchParams({date:j(y,"yyyy-MM-dd"),time:b,duration:x.toString(),gameType:J,playersCount:"1",price:l.price.toString(),pricePerPlayer:l.price.toString(),customerName:N,customerPhone:E,customerEmail:z});window.location.href=`/club/${u.id}/court/${i.id}/payment?${d.toString()}`}catch(r){console.error("Error creating booking:",r),alert("Ошибка при создании бронирования")}finally{R(!1)}};if(!q)return null;const Me=()=>{var o;const r=[],s=["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],p=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"];for(let t=0;t<14;t++)r.push(Oe(ye(),t));return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h3",style:{marginBottom:"var(--spacing-lg)"},children:"Выберите дату и время"}),e.jsxs("div",{style:{display:a?"block":"grid",gridTemplateColumns:a?"1fr":"300px 1fr",gap:"var(--spacing-xl)"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"var(--spacing-xl)"},children:[e.jsx("h4",{className:"body-bold",style:{marginBottom:"var(--spacing-md)"},children:"Дата бронирования"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"var(--spacing-xs)"},children:r.map((t,l)=>{const d=j(t,"yyyy-MM-dd")===j(y,"yyyy-MM-dd"),v=l===0,m=p[t.getDay()],h=l===0||t.getDate()===1;return e.jsxs("div",{style:{textAlign:"center"},children:[h&&e.jsx("div",{className:"caption",style:{marginBottom:"var(--spacing-xs)",color:"var(--gray)",height:"16px",fontSize:"11px"},children:s[t.getMonth()]}),!h&&e.jsx("div",{style:{height:"16px",marginBottom:"var(--spacing-xs)"}}),e.jsxs("button",{onClick:()=>Se(t),style:{width:"100%",aspectRatio:"1",padding:"4px",border:`2px solid ${d||v?"var(--primary)":"var(--extra-light-gray)"}`,borderRadius:"var(--radius-sm)",background:d?"var(--primary)":"var(--white)",color:d?"white":"var(--dark)",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:[e.jsx("div",{className:"caption",style:{fontWeight:600,color:d?"white":"var(--gray)"},children:m}),e.jsx("div",{className:"body-bold",style:{fontSize:"16px",color:d?"white":"var(--dark)"},children:t.getDate()})]})]},t.toISOString())})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"body-bold",style:{marginBottom:"var(--spacing-md)"},children:"Длительность игры"}),e.jsx("div",{style:{display:"flex",gap:"var(--spacing-sm)"},children:[60,90,120].map(t=>{if(!((u.bookingDurations||{60:!0,90:!0,120:!0})[t]!==!1))return null;const v=y.getDay(),h=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][v];let T=0;if(i.pricing&&i.pricing[h])T=i.pricing[h].basePrice;else{const w=v===0||v===6;T=i.pricePerHour||(w?i.priceWeekend:i.priceWeekday)||0}const D=Math.round(T*t/60);return e.jsxs("button",{onClick:()=>{t!==x&&(de(t),Q(""),B(t))},style:{flex:1,padding:a?"var(--spacing-sm) var(--spacing-xs)":"var(--spacing-md)",border:`2px solid ${x===t?"var(--primary)":"var(--extra-light-gray)"}`,borderRadius:"var(--radius-md)",background:x===t?"var(--primary)":"var(--white)",color:x===t?"white":"var(--dark)",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[e.jsx("span",{className:"body-bold",style:{fontSize:a?"14px":"16px"},children:t===60?"1 час":t===90?"1.5 часа":"2 часа"}),e.jsxs("span",{className:"caption",style:{color:x===t?"white":"var(--primary)",fontWeight:600},children:[D,"₽"]})]},t)})})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"body-bold",style:{marginBottom:"var(--spacing-md)"},children:["Свободное время на ",j(y,"d MMMM",{locale:oe})]}),ae?e.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-3xl)"},children:e.jsx("div",{className:"spinner"})}):V.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:a?"repeat(3, 1fr)":"repeat(4, 1fr)",gap:"var(--spacing-sm)",maxHeight:a?"400px":"500px",overflowY:"auto",paddingRight:"var(--spacing-sm)",marginBottom:"var(--spacing-md)"},children:V.map(t=>{const l=b===t.time;return e.jsxs("button",{onClick:()=>t.available&&Q(t.time),disabled:!t.available,style:{padding:"var(--spacing-md) var(--spacing-xs)",border:`2px solid ${t.available?l?"var(--primary)":"var(--light-gray)":"var(--extra-light-gray)"}`,borderRadius:"var(--radius-sm)",background:t.available?l?"var(--primary)":"var(--white)":"var(--extra-light-gray)",color:t.available?l?"white":"var(--dark)":"var(--gray)",cursor:t.available?"pointer":"not-allowed",transition:"all 0.2s",opacity:t.available?1:.5,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",minHeight:"65px",justifyContent:"center"},children:[e.jsxs("span",{className:"body-bold",style:{fontSize:"14px"},children:[t.time,"-",(()=>{const[d,v]=t.time.split(":").map(Number),m=new Date;return m.setHours(d,v,0,0),m.setTime(m.getTime()+x*60*1e3),`${m.getHours().toString().padStart(2,"0")}:${m.getMinutes().toString().padStart(2,"0")}`})()]}),t.available?l&&e.jsx("span",{className:"caption",style:{color:"white",fontWeight:600},children:"Выбрано"}):e.jsx("span",{className:"caption",children:"Занято"})]},t.time)})}),e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-lg)",flexWrap:"wrap",marginTop:"var(--spacing-md)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-xs)"},children:[e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"var(--white)",border:"2px solid var(--light-gray)",borderRadius:"4px"}}),e.jsx("span",{className:"caption",children:"Свободно"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-xs)"},children:[e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"var(--extra-light-gray)",borderRadius:"4px"}}),e.jsx("span",{className:"caption",children:"Занято"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-xs)"},children:[e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"var(--primary)",borderRadius:"4px"}}),e.jsx("span",{className:"caption",children:"Выбрано"})]})]})]}):e.jsx("div",{style:{textAlign:"center",padding:"var(--spacing-xl)",color:"var(--gray)"},children:e.jsx("p",{className:"body",children:"Нет доступных слотов на выбранную дату"})})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:a?"fixed":"static",bottom:a?"0":"auto",left:a?"0":"auto",right:a?"0":"auto",padding:a?"var(--spacing-lg)":"0",marginTop:a?"var(--spacing-xl)":"var(--spacing-lg)",background:a?"var(--white)":"transparent",borderTop:a?"1px solid var(--extra-light-gray)":"none",zIndex:10},children:[e.jsx("div",{style:{flex:1},children:b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"caption",style:{color:"var(--gray)",marginBottom:"4px"},children:[j(y,"d MMMM",{locale:oe}),", ",b,"-",(()=>{const[t,l]=b.split(":").map(Number),d=new Date;return d.setHours(t,l,0,0),d.setTime(d.getTime()+x*60*1e3),`${d.getHours().toString().padStart(2,"0")}:${d.getMinutes().toString().padStart(2,"0")}`})()]}),e.jsxs("div",{className:"h3",style:{color:"var(--primary)"},children:[((o=V.find(t=>t.time===b))==null?void 0:o.price)||0," ₽"]})]})}),e.jsx("button",{className:"flutter-button",onClick:()=>Ne(b),disabled:!y||!b,style:{width:a?"50%":"auto",minWidth:"200px"},children:"Продолжить"})]})]})},Ie=()=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h3",style:{marginBottom:"var(--spacing-lg)"},children:"Выберите тип игры"}),e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-md)"},children:[e.jsxs("button",{onClick:()=>Te("private"),style:{padding:"var(--spacing-lg)",border:`2px solid ${J==="private"?"var(--primary)":"var(--extra-light-gray)"}`,borderRadius:"var(--radius-md)",background:J==="private"?"var(--primary-light)":"var(--white)",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},children:[e.jsx("div",{className:"body-bold",children:"Приватная игра"}),e.jsx("div",{className:"caption",style:{color:"var(--gray)"},children:"Для вас и ваших друзей"})]}),e.jsxs("button",{style:{padding:"var(--spacing-lg)",border:"2px solid var(--extra-light-gray)",borderRadius:"var(--radius-md)",background:"var(--extra-light-gray)",cursor:"not-allowed",transition:"all 0.2s",textAlign:"left",opacity:.6},disabled:!0,children:[e.jsx("div",{className:"body-bold",style:{color:"var(--gray)"},children:"Открытая игра"}),e.jsx("div",{className:"caption",style:{color:"var(--gray)"},children:"Присоединиться к игре (доступно в приложении)"})]})]}),e.jsxs("div",{style:{marginTop:"var(--spacing-xl)",display:"flex",justifyContent:"space-between",gap:"var(--spacing-md)",position:a?"fixed":"static",bottom:a?"0":"auto",left:a?"0":"auto",right:a?"0":"auto",padding:a?"var(--spacing-lg)":"0",background:a?"var(--white)":"transparent",borderTop:a?"1px solid var(--extra-light-gray)":"none",zIndex:10},children:[e.jsx("button",{className:"flutter-button-outlined",onClick:()=>G("datetime"),style:{flex:1,background:"var(--white)",color:"var(--primary)",border:"2px solid var(--primary)"},children:"Назад"}),e.jsx("button",{className:"flutter-button",onClick:()=>G("payment"),style:{flex:1},children:"Далее"})]})]}),He=()=>{const r=(()=>{const s=V.find(p=>p.time===b);return(s==null?void 0:s.price)||0})();return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h3",style:{marginBottom:"var(--spacing-lg)"},children:"Оплата бронирования"}),e.jsx("div",{className:"info-section",style:{marginBottom:"var(--spacing-lg)"},children:e.jsxs("div",{style:{display:"grid",gap:"var(--spacing-sm)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{className:"body",children:"Корт:"}),e.jsx("span",{className:"body-bold",children:i.name})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{className:"body",children:"Дата:"}),e.jsx("span",{className:"body-bold",children:j(y,"d MMMM yyyy",{locale:oe})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{className:"body",children:"Время:"}),e.jsxs("span",{className:"body-bold",children:[b," - ",(()=>{const[s,p]=b.split(":").map(Number),o=new Date;return o.setHours(s,p,0,0),o.setTime(o.getTime()+x*60*1e3),`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`})()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{className:"body",children:"Тип игры:"}),e.jsx("span",{className:"body-bold",children:"Приватная"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"var(--spacing-sm)",borderTop:"1px solid var(--extra-light-gray)"},children:[e.jsx("span",{className:"body-bold",children:"Итого:"}),e.jsxs("span",{className:"h3",style:{color:"var(--primary)"},children:[r,"₽"]})]})]})}),e.jsxs("div",{style:{marginBottom:"var(--spacing-lg)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Имя"}),e.jsx("input",{type:"text",className:"form-input",value:N,onChange:s=>ve(s.target.value),placeholder:"Иван Иванов",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Телефон"}),e.jsx("input",{type:"tel",className:"form-input",value:E,onChange:s=>ke(s.target.value),placeholder:"+7 (900) 123-45-67",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-input",value:z,onChange:s=>je(s.target.value),placeholder:"email@example.com",required:!0})]}),e.jsxs("div",{style:{marginTop:"var(--spacing-md)",padding:"var(--spacing-md)",backgroundColor:"var(--chip-background)",borderRadius:"var(--radius-md)",border:"1px solid var(--primary-light)",display:"flex",gap:"var(--spacing-sm)",alignItems:"flex-start"},children:[e.jsx("span",{style:{fontSize:"20px",color:"var(--primary)"},children:"ℹ️"}),e.jsx("p",{className:"caption",style:{color:"var(--primary-dark)"},children:"Бронирование будет подтверждено только после успешной оплаты"})]})]}),e.jsxs("div",{style:{marginTop:"var(--spacing-xl)",display:"flex",justifyContent:"space-between",gap:"var(--spacing-md)",position:a?"fixed":"static",bottom:a?"0":"auto",left:a?"0":"auto",right:a?"0":"auto",padding:a?"var(--spacing-lg)":"0",background:a?"var(--white)":"transparent",borderTop:a?"1px solid var(--extra-light-gray)":"none",zIndex:10},children:[e.jsx("button",{className:"flutter-button-outlined",onClick:()=>G("gameType"),style:{flex:1,background:"var(--white)",color:"var(--primary)",border:"2px solid var(--primary)"},children:"Назад"}),e.jsx("button",{className:"flutter-button",onClick:De,disabled:ae||!N||!E||!z,style:{flex:1},children:ae?e.jsx("div",{className:"spinner"}):"Перейти к оплате"})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop",onClick:le,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,display:q?"block":"none",animation:"fadeIn 0.2s ease"}}),e.jsxs("div",{className:"modal-content",style:{position:"fixed",top:a?"0":"50%",left:a?"0":"50%",transform:a?"none":"translate(-50%, -50%)",background:"var(--white)",borderRadius:a?"0":"var(--radius-xl)",padding:a?"var(--spacing-lg)":"var(--spacing-2xl)",maxWidth:a?"100%":"1000px",width:a?"100%":"90%",height:a?"100vh":"auto",maxHeight:a?"100vh":"85vh",overflowY:"auto",zIndex:1001,display:q?"block":"none",boxShadow:a?"none":"var(--shadow-xl)",animation:a?"slideUp 0.3s ease":"slideIn 0.3s ease"},children:[e.jsx("button",{onClick:le,style:{position:"absolute",top:"var(--spacing-md)",right:"var(--spacing-md)",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--gray)"},children:"×"}),U==="datetime"&&Me(),U==="gameType"&&Ie(),U==="payment"&&He()]}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideIn {
          from { 
            opacity: 0;
            transform: translate(-50%, -45%);
          }
          to { 
            opacity: 1;
            transform: translate(-50%, -50%);
          }
        }
        
        @keyframes slideUp {
          from { 
            opacity: 0;
            transform: translateY(100%);
          }
          to { 
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .spinner {
          width: 40px;
          height: 40px;
          border: 3px solid var(--extra-light-gray);
          border-top-color: var(--primary);
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto;
        }
        
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
          .modal-content {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            transform: none !important;
            width: 100% !important;
            height: 100vh !important;
            max-width: 100% !important;
            max-height: 100vh !important;
            border-radius: 0 !important;
            padding: var(--spacing-lg) !important;
          }
        }
      `})]})}export{Ke as default};
